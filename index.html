<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>متجر Elora</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    :root {
      --primary-color: #3a6ea5;
      --accent-color: #ff6b6b;
      --light-bg: #f8f9fa;
      --dark-text: #343a40;
      --light-text: #f8f9fa;
      --border-radius: 6px;
      --box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Tajawal', 'Cairo', sans-serif;
    }
    
    body {
      background-color: var(--light-bg);
      color: var(--dark-text);
      line-height: 1.6;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    /* Header */
    header {
      background-color: #fff;
      box-shadow: var(--box-shadow);
      padding: 15px 0;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .logo h1 {
      color: var(--primary-color);
      font-size: 1.8rem;
      margin: 0;
      font-weight: 700;
    }
    
    .cart-icon {
      background-color: var(--light-bg);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      cursor: pointer;
    }
    
    .cart-count {
      position: absolute;
      top: -5px;
      left: -5px;
      background-color: var(--accent-color);
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      font-size: 0.7rem;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    /* Main Content */
    main {
      padding: 30px 0;
    }
    
    .section-title {
      text-align: center;
      margin-bottom: 30px;
      color: var(--dark-text);
      font-size: 1.6rem;
      position: relative;
      padding-bottom: 10px;
    }
    
    .section-title::after {
      content: '';
      position: absolute;
      bottom: 0;
      right: 50%;
      transform: translateX(50%);
      width: 50px;
      height: 3px;
      background-color: var(--primary-color);
    }
    
    /* Products Grid */
    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }
    
    .product {
      background-color: white;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      overflow: hidden;
    }
    
    .product-image {
      height: 200px;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: #f8f9fa;
    }
    
    .product-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .product-info {
      padding: 15px;
    }
    
    .product-title {
      font-size: 1.1rem;
      font-weight: bold;
      margin-bottom: 6px;
      color: var(--dark-text);
    }
    
    .product-price {
      font-size: 1.1rem;
      color: var(--primary-color);
      font-weight: bold;
      margin-bottom: 12px;
    }
    
    .product-action {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .quantity-control {
      display: flex;
      align-items: center;
      border: 1px solid #e1e5eb;
      border-radius: 4px;
      overflow: hidden;
    }
    
    .quantity-btn {
      background-color: #f1f3f5;
      border: none;
      width: 28px;
      height: 28px;
      font-size: 1rem;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .quantity-display {
      width: 28px;
      text-align: center;
      font-weight: bold;
    }
    
    .add-to-cart {
      background-color: var(--primary-color);
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    
    /* Cart Section */
    .cart-section {
      background-color: white;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      padding: 25px;
      margin-top: 20px;
    }
    
    .cart-title {
      margin-bottom: 20px;
      color: var(--dark-text);
      font-size: 1.4rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .cart-items {
      margin-bottom: 25px;
    }
    
    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid #eee;
    }
    
    .cart-item-name {
      flex: 2;
      font-weight: bold;
    }
    
    .cart-item-price, .cart-item-quantity, .cart-item-total {
      flex: 1;
      text-align: center;
    }
    
    .cart-item-remove {
      flex: 0.5;
      text-align: center;
    }
    
    .remove-btn {
      background-color: var(--accent-color);
      color: white;
      border: none;
      border-radius: 4px;
      width: 24px;
      height: 24px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
    }
    
    .cart-summary {
      display: flex;
      justify-content: space-between;
      font-weight: bold;
      font-size: 1.2rem;
      padding: 15px 0;
      border-top: 2px solid #eee;
      margin-top: 15px;
    }
    
    /* Form */
    .customer-form {
      margin-top: 30px;
    }
    
    .form-title {
      margin-bottom: 20px;
      color: var(--dark-text);
      font-size: 1.4rem;
      font-weight: 600;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-label {
      display: block;
      margin-bottom: 5px;
      font-weight: 600;
      color: var(--dark-text);
    }
    
    .form-control {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: var(--border-radius);
      font-size: 1rem;
    }
    
    .form-control:focus {
      outline: none;
      border-color: var(--primary-color);
    }
    
    .form-row {
      display: flex;
      gap: 15px;
    }
    
    .form-col {
      flex: 1;
    }
    
    .submit-btn {
      background-color: var(--primary-color);
      color: white;
      border: none;
      padding: 12px 20px;
      border-radius: var(--border-radius);
      font-size: 1.1rem;
      cursor: pointer;
      width: 100%;
      margin-top: 15px;
    }
    
    .empty-cart-message {
      text-align: center;
      padding: 20px;
      color: #777;
    }
    
    /* Utilities */
    .hidden {
      display: none;
    }
    
    .alert {
      background-color: #f8d7da;
      color: #721c24;
      padding: 10px;
      border-radius: var(--border-radius);
      margin-bottom: 15px;
      text-align: center;
    }
    
    .success {
      background-color: #d4edda;
      color: #155724;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .products-grid {
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 15px;
      }
      
      .form-row {
        flex-direction: column;
        gap: 0;
      }
      
      .cart-item {
        flex-wrap: wrap;
        padding: 10px 0;
      }
      
      .cart-item-name {
        flex: 100%;
        margin-bottom: 5px;
      }
      
      .cart-item-price,
      .cart-item-quantity,
      .cart-item-total {
        flex: 1;
      }
    }
  </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1>Elora Store</h1>
                </div>
                <div class="cart-icon" id="cartIcon" onclick="toggleCartVisibility()">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count" id="cartCount">0</span>
                </div>
            </div>
        </div>
    </header>
    
    <main class="container">
        <section id="productsSection">
            <h2 class="section-title">تسوق منتجاتك بكل اريحية وسلاسة</h2>
            <div class="products-grid" id="productsGrid">
                <!-- المنتج 1: تيبل لامب -->
                <div class="product">
                    <div class="product-image">
                        <img src="E4.PNG" alt="تيبل لامب">
                    </div>
                    <div class="product-info">
                        <div class="product-title">تيبل لامب</div>
                        <div class="product-price">6000 IQD</div>
                        <div class="product-action">
                            <div class="quantity-control">
                                <button class="quantity-btn" onclick="decreaseQuantity('product1')">-</button>
                                <span class="quantity-display" id="quantity-product1">1</span>
                                <button class="quantity-btn" onclick="increaseQuantity('product1')">+</button>
                            </div>
                            <button class="add-to-cart" onclick="addToCart('تيبل لامب', 6000, 'product1')">
                                <i class="fas fa-cart-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- المنتج 2: مطارة -->
                <div class="product">
                    <div class="product-image">
                        <img src="E1.PNG" alt="مطارة">
                    </div>
                    <div class="product-info">
                        <div class="product-title">مطارة</div>
                        <div class="product-price">6000 IQD</div>
                        <div class="product-action">
                            <div class="quantity-control">
                                <button class="quantity-btn" onclick="decreaseQuantity('product2')">-</button>
                                <span class="quantity-display" id="quantity-product2">1</span>
                                <button class="quantity-btn" onclick="increaseQuantity('product2')">+</button>
                            </div>
                            <button class="add-to-cart" onclick="addToCart('مطاره حافضة للحرارة و البرودة', 6000, 'product2')">
                                <i class="fas fa-cart-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- المنتج 3: (مك) كوب -->
                <div class="product">
                    <div class="product-image">
                        <img src="E6.PNG" alt="(مك) كوب">
                    </div>
                    <div class="product-info">
                        <div class="product-title">(مك) كوب</div>
                        <div class="product-price">6000 IQD</div>
                        <div class="product-action">
                            <div class="quantity-control">
                                <button class="quantity-btn" onclick="decreaseQuantity('product3')">-</button>
                                <span class="quantity-display" id="quantity-product3">1</span>
                                <button class="quantity-btn" onclick="increaseQuantity('product3')">+</button>
                            </div>
                            <button class="add-to-cart" onclick="addToCart('كول مع قصبة باسلوب جميل', 6000, 'product3')">
                                <i class="fas fa-cart-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- المنتج 4: مبخرة شلال A -->
                <div class="product">
                    <div class="product-image">
                        <img src="E2.PNG" alt="مبخرة شلال">
                    </div>
                    <div class="product-info">
                        <div class="product-title">مبخرة شلال</div>
                        <div class="product-price">10000 IQD</div>
                        <div class="product-action">
                            <div class="quantity-control">
                                <button class="quantity-btn" onclick="decreaseQuantity('product4')">-</button>
                                <span class="quantity-display" id="quantity-product4">1</span>
                                <button class="quantity-btn" onclick="increaseQuantity('product4')">+</button>
                            </div>
                            <button class="add-to-cart" onclick="addToCart('A مبخرة شلال شكل', 10000, 'product4')">
                                <i class="fas fa-cart-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- المنتج 5: مبخرة شلال B -->
                <div class="product">
                    <div class="product-image">
                        <img src="E5.PNG" alt="مبخرة شلال">
                    </div>
                    <div class="product-info">
                        <div class="product-title">مبخرة شلال</div>
                        <div class="product-price">10000 IQD</div>
                        <div class="product-action">
                            <div class="quantity-control">
                                <button class="quantity-btn" onclick="decreaseQuantity('product5')">-</button>
                                <span class="quantity-display" id="quantity-product5">1</span>
                                <button class="quantity-btn" onclick="increaseQuantity('product5')">+</button>
                            </div>
                            <button class="add-to-cart" onclick="addToCart('B مبخرة شلال شكل', 10000, 'product5')">
                                <i class="fas fa-cart-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- المنتج 6: بخور شلال -->
                <div class="product">
                    <div class="product-image">
                        <img src="E3.PNG" alt="بخور شلال">
                    </div>
                    <div class="product-info">
                        <div class="product-title">بخور شلال</div>
                        <div class="product-price">3000 IQD</div>
                        <div class="product-action">
                            <div class="quantity-control">
                                <button class="quantity-btn" onclick="decreaseQuantity('product6')">-</button>
                                <span class="quantity-display" id="quantity-product6">1</span>
                                <button class="quantity-btn" onclick="increaseQuantity('product6')">+</button>
                            </div>
                            <button class="add-to-cart" onclick="addToCart('بخور شلال', 3000, 'product6')">
                                <i class="fas fa-cart-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="cartSection" class="cart-section hidden">
            <h2 class="cart-title">
                <span>سلة التسوق</span>
                <button onclick="toggleCartVisibility()" style="background: none; border: none; cursor: pointer;">
                    <i class="fas fa-arrow-right"></i>
                </button>
            </h2>
            
            <div id="cartContent">
                <div id="emptyCart" class="empty-cart-message">
                    السلة فارغة. قم بإضافة منتجات للبدء.
                </div>
                
                <div id="cartItemsList" class="cart-items hidden">
                    <!-- ستتم إضافة المنتجات هنا ديناميكياً -->
                </div>
                
                <div id="cartSummary" class="cart-summary hidden">
                    <span>المجموع الكلي:</span>
                    <span id="totalAmount">0 IQD</span>
                </div>
            </div>
            
            <div class="customer-form">
                <h3 class="form-title">معلومات الطلب</h3>
                <div id="formAlert" class="alert hidden"></div>
                
                <div class="form-group">
                    <label class="form-label" for="name">الاسم الكامل</label>
                    <input type="text" id="name" class="form-control" placeholder="أدخل اسمك الكامل">
                </div>
                
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label" for="phone">رقم الهاتف</label>
                            <input type="tel" id="phone" class="form-control" placeholder="أدخل رقم هاتفك">
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label class="form-label" for="province">المحافظة</label>
                            <select id="province" class="form-control">
                                <option value="">اختر المحافظة</option>
                                <option>بغداد</option>
                                <option>البصرة</option>
                                <option>النجف</option>
                                <option>نينوى</option>
                                <option>كركوك</option>
                                <option>أربيل</option>
                                <option>السليمانية</option>
                                <option>ذي قار</option>
                                <option>الأنبار</option>
                                <option>الديوانية</option>
                                <option>ميسان</option>
                                <option>دهوك</option>
                                <option>واسط</option>
                                <option>بابل</option>
                                <option>كربلاء</option>
                                <option>صلاح الدين</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="address">العنوان التفصيلي</label>
                    <input type="text" id="address" class="form-control" placeholder="أدخل عنوانك التفصيلي">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="landmark">أقرب نقطة دالة</label>
                    <input type="text" id="landmark" class="form-control" placeholder="مثال: قرب مدرسة الرافدين">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="notes">ملاحظات إضافية (اختياري)</label>
                    <textarea id="notes" class="form-control" rows="3" placeholder="أي معلومات إضافية ترغب بإضافتها للطلب"></textarea>
                </div>
                
                <button id="submitBtn" class="submit-btn" onclick="submitOrder()">
                    <i class="fas fa-check-circle"></i> إتمام الطلب
                </button>
            </div>
        </section>
    </main>
    
    <script>
        
        /**
         * إلورا للتسوق - نظام إدارة السلة والطلبات
         * كود جافاسكريبت محسن ومنظم
         */
        
        // متغيرات عامة
        let cart = [];
        let quantities = {
            'product1': 1,
            'product2': 1,
            'product3': 1,
            'product4': 1,
            'product5': 1,
            'product6': 1
        };
        
        // ثوابت التطبيق
        const MAX_QUANTITY = 10;
        const MIN_QUANTITY = 1;
        const STORE_WHATSAPP = '9647832375638'; // يرجى تغييره إلى رقم المتجر الفعلي
        const LOCAL_STORAGE_KEYS = {
            CART: 'eloraCart',
            QUANTITIES: 'eloraQuantities'
        };
        
        /**
         * وظائف التحكم بالكمية
         */
        function increaseQuantity(productId) {
            if (quantities[productId] < MAX_QUANTITY) {
                quantities[productId]++;
                updateQuantityDisplay(productId);
            }
        }
        
        function decreaseQuantity(productId) {
            if (quantities[productId] > MIN_QUANTITY) {
                quantities[productId]--;
                updateQuantityDisplay(productId);
            }
        }
        
        function updateQuantityDisplay(productId) {
            const quantityElement = document.getElementById(`quantity-${productId}`);
            if (quantityElement) {
                quantityElement.textContent = quantities[productId];
            }
        }
        
        /**
         * وظائف عرض المنتجات والسلة
         */
        function toggleCartVisibility() {
            const productsSection = document.getElementById('productsSection');
            const cartSection = document.getElementById('cartSection');
            
            if (cartSection.classList.contains('hidden')) {
                productsSection.classList.add('hidden');
                cartSection.classList.remove('hidden');
            } else {
                cartSection.classList.add('hidden');
                productsSection.classList.remove('hidden');
            }
        }
        
        /**
         * وظائف إدارة السلة
         */
        function addToCart(name, price, productId) {
            const quantity = quantities[productId];
            const existingItemIndex = cart.findIndex(item => item.id === productId);
            
            if (existingItemIndex !== -1) {
                // تحديث الكمية إذا كان المنتج موجودًا بالفعل
                cart[existingItemIndex].quantity += quantity;
            } else {
                // إضافة منتج جديد
                cart.push({
                    name: name,
                    price: price,
                    quantity: quantity,
                    id: productId
                });
            }
            
            // تحديث السلة
            updateCartDisplay();
            
            // إعادة تعيين الكمية إلى 1
            quantities[productId] = 1;
            updateQuantityDisplay(productId);
            
            // عرض رسالة تأكيد
            showAlert(`تم إضافة ${name} إلى السلة بنجاح!`, 'success');
        }
        
        function removeFromCart(index) {
            if (index >= 0 && index < cart.length) {
                cart.splice(index, 1);
                updateCartDisplay();
            }
        }
        
        function clearCart() {
            cart = [];
            updateCartDisplay();
            showAlert('تم إفراغ السلة بنجاح', 'success');
        }
        
        function updateCartItemQuantity(index, change) {
            if (index >= 0 && index < cart.length) {
                const newQuantity = cart[index].quantity + change;
                
                if (newQuantity >= MIN_QUANTITY && newQuantity <= MAX_QUANTITY) {
                    cart[index].quantity = newQuantity;
                    updateCartDisplay();
                }
            }
        }
        
        function updateCartDisplay() {
            const cartItemsList = document.getElementById('cartItemsList');
            const emptyCart = document.getElementById('emptyCart');
            const cartSummary = document.getElementById('cartSummary');
            const cartCount = document.getElementById('cartCount');
            
            if (!cartItemsList || !emptyCart || !cartSummary || !cartCount) {
                console.error('عناصر السلة غير موجودة في الصفحة');
                return;
            }
            
            // تحديث عدد العناصر
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
            
            // إذا كانت السلة فارغة
            if (cart.length === 0) {
                cartItemsList.classList.add('hidden');
                cartSummary.classList.add('hidden');
                emptyCart.classList.remove('hidden');
                saveCartToLocalStorage();
                return;
            }
            
            // إذا كانت السلة تحتوي على عناصر
            emptyCart.classList.add('hidden');
            cartItemsList.classList.remove('hidden');
            cartSummary.classList.remove('hidden');
            
            // تحديث محتوى السلة
            cartItemsList.innerHTML = '';
            let total = 0;
            
            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
            <div class="cart-item-name">${item.name}</div>
            <div class="cart-item-price">${formatPrice(item.price)}</div>
            <div class="cart-item-quantity">
              <button class="quantity-btn" onclick="updateCartItemQuantity(${index}, -1)">-</button>
              <span class="quantity-display">${item.quantity}</span>
              <button class="quantity-btn" onclick="updateCartItemQuantity(${index}, 1)">+</button>
            </div>
            <div class="cart-item-total">${formatPrice(itemTotal)}</div>
            <div class="cart-item-remove">
              <button class="remove-btn" onclick="removeFromCart(${index})">
                <i class="fas fa-trash-alt"></i>
              </button>
            </div>
          `;
          
          cartItemsList.appendChild(cartItem);
            });
            
            // تحديث المجموع
            const totalAmountElement = document.getElementById('totalAmount');
            if (totalAmountElement) {
                totalAmountElement.textContent = formatPrice(total);
            }
            
            // حفظ التغييرات
            saveCartToLocalStorage();
        }
        
        /**
         * وظائف التخزين المحلي
         */
        function saveCartToLocalStorage() {
            try {
                localStorage.setItem(LOCAL_STORAGE_KEYS.CART, JSON.stringify(cart));
                localStorage.setItem(LOCAL_STORAGE_KEYS.QUANTITIES, JSON.stringify(quantities));
            } catch (error) {
                console.error('خطأ في حفظ البيانات محليًا:', error);
            }
        }
        
        function loadCartFromLocalStorage() {
            try {
                const savedCart = localStorage.getItem(LOCAL_STORAGE_KEYS.CART);
                const savedQuantities = localStorage.getItem(LOCAL_STORAGE_KEYS.QUANTITIES);
                
                if (savedCart) {
                    cart = JSON.parse(savedCart);
                }
                
                if (savedQuantities) {
                    quantities = JSON.parse(savedQuantities);
                    // تحديث عرض الكميات
                    for (const productId in quantities) {
                        updateQuantityDisplay(productId);
                    }
                }
                
                updateCartDisplay();
            } catch (error) {
                console.error('خطأ في تحميل البيانات المحلية:', error);
                // في حالة الخطأ، إعادة تعيين البيانات
                cart = [];
                resetQuantities();
                updateCartDisplay();
            }
        }
        
        function resetQuantities() {
            Object.keys(quantities).forEach(productId => {
                quantities[productId] = 1;
                updateQuantityDisplay(productId);
            });
        }
        
        /**
         * وظائف مساعدة
         */
        function formatPrice(price) {
            return price.toLocaleString() + ' IQD';
        }
        
        function showAlert(message, type = '') {
            const alertElement = document.getElementById('formAlert');
            if (!alertElement) {
                console.error('عنصر التنبيه غير موجود في الصفحة');
                return;
            }
            
            alertElement.textContent = message;
            alertElement.className = 'alert';
            
            if (type === 'success') {
                alertElement.classList.add('success');
            }
            
            alertElement.classList.remove('hidden');
            
            // إخفاء الرسالة بعد 3 ثوان
            setTimeout(() => {
                alertElement.classList.add('hidden');
            }, 3000);
        }
        
        function validatePhoneNumber(phone) {
            // تحقق من أن رقم الهاتف يتكون من أرقام فقط ويتراوح طوله بين 10 و 11 رقم
            const phoneRegex = /^\d{10,11}$/;
            return phoneRegex.test(phone);
        }
        
        /**
         * وظائف إرسال الطلب
         */
        function submitOrder() {
            // التحقق من وجود منتجات في السلة
            if (cart.length === 0) {
                showAlert('يرجى إضافة منتجات إلى السلة أولاً');
                return;
            }
            
            // الحصول على بيانات العميل
            const name = document.getElementById('name').value.trim();
            const phone = document.getElementById('phone').value.trim();
            const province = document.getElementById('province').value.trim();
            const address = document.getElementById('address').value.trim();
            const landmark = document.getElementById('landmark').value.trim();
            const notes = document.getElementById('notes').value.trim();
            
            // التحقق من صحة البيانات
            if (!name || !phone || !province || !address || !landmark) {
                showAlert('يرجى ملء جميع الحقول المطلوبة');
                return;
            }
            
            // التحقق من صحة رقم الهاتف
            if (!validatePhoneNumber(phone)) {
                showAlert('يرجى إدخال رقم هاتف صحيح (10-11 رقم)');
                return;
            }
            
            // إنشاء نص رسالة واتساب
            let total = 0;
            let productsText = '';
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                productsText += `- ${item.name} (${item.quantity}x) = ${formatPrice(itemTotal)}%0A`;
            });
            
            const message = `طلب جديد:%0A
      %0A*معلومات الزبون:*%0A
      - الاسم: ${name}%0A
      - الهاتف: ${phone}%0A
      - المحافظة: ${province}%0A
      - العنوان: ${address}%0A
      - أقرب نقطة دالة: ${landmark}%0A
      ${notes ? `- ملاحظات: ${notes}%0A` : ''}
      %0A*المنتجات:*%0A${productsText}
      %0A*المجموع الكلي:* ${formatPrice(total)}`;
      
      // إنشاء رابط واتساب
      const whatsappURL = `https://wa.me/${STORE_WHATSAPP}?text=${encodeURIComponent(message)}`;
      
      // عرض رسالة تأكيد
      showAlert('جاري تحويلك إلى واتساب لإتمام الطلب...', 'success');
      
      // الانتقال إلى واتساب بعد ثانيتين
      setTimeout(() => {
          window.open(whatsappURL, '_blank');
          
          // إفراغ السلة بعد إرسال الطلب
          cart = [];
          updateCartDisplay();
          
          // إفراغ حقول النموذج
          clearOrderForm();
          
          // العودة لصفحة المنتجات
          setTimeout(() => {
              toggleCartVisibility();
          }, 1000);
      }, 2000);
        }
        
        function clearOrderForm() {
            const formFields = ['name', 'phone', 'province', 'address', 'landmark', 'notes'];
            formFields.forEach(field => {
                const element = document.getElementById(field);
                if (element) {
                    element.value = '';
                }
            });
        }
        
        /**
         * إضافة عناصر واجهة المستخدم
         */
        function addClearCartButton() {
            const cartTitle = document.querySelector('.cart-title');
            if (!cartTitle) {
                console.error('عنصر عنوان السلة غير موجود في الصفحة');
                return;
            }
            
            // إنشاء زر إفراغ السلة
            const clearButton = document.createElement('button');
            clearButton.innerHTML = '<i class="fas fa-trash"></i> إفراغ السلة';
            clearButton.className = 'clear-cart-btn';
            clearButton.style.background = 'var(--accent-color)';
            clearButton.style.color = 'white';
            clearButton.style.border = 'none';
            clearButton.style.borderRadius = '4px';
            clearButton.style.padding = '5px 10px';
            clearButton.style.marginRight = '10px';
            clearButton.style.cursor = 'pointer';
            clearButton.onclick = clearCart;
            
            // إضافة الزر بجانب عنوان السلة
            cartTitle.insertBefore(clearButton, cartTitle.firstChild.nextSibling);
        }
        
        /**
         * مستمعات الأحداث
         */
        function setupEventListeners() {
            // تحقق من صحة رقم الهاتف أثناء الإدخال
            const phoneInput = document.getElementById('phone');
            if (phoneInput) {
                phoneInput.addEventListener('input', function() {
                    let phoneValue = this.value.replace(/\D/g, ''); // إزالة جميع الأحرف غير الرقمية
                    if (phoneValue.length > 11) {
                        phoneValue = phoneValue.slice(0, 11); // تقييد الطول إلى 11 رقم كحد أقصى
                    }
                    this.value = phoneValue;
                });
            }
            
            // إضافة تأثير النقر على أزرار الكمية
            const quantityButtons = document.querySelectorAll('.quantity-btn');
            quantityButtons.forEach(button => {
                button.addEventListener('click', function() {
                    this.classList.add('clicked');
                    setTimeout(() => {
                        this.classList.remove('clicked');
                    }, 150);
                });
            });
            
            // إضافة تأثير النقر على زر الإضافة للسلة
            const addToCartButtons = document.querySelectorAll('.add-to-cart');
            addToCartButtons.forEach(button => {
                button.addEventListener('click', function() {
                    this.classList.add('clicked');
                    setTimeout(() => {
                        this.classList.remove('clicked');
                    }, 150);
                });
            });
        }
        
        /**
         * تهيئة التطبيق
         */
        function initializeApp() {
            try {
                // تحميل السلة من التخزين المحلي
                loadCartFromLocalStorage();
                
                // إضافة زر إفراغ السلة
                addClearCartButton();
                
                // إعداد مستمعات الأحداث
                setupEventListeners();
                
                // تحديث عرض السلة
                updateCartDisplay();
                
                console.log('تم تهيئة تطبيق إلورا للتسوق بنجاح');
            } catch (error) {
                console.error('خطأ في تهيئة التطبيق:', error);
            }
        }
        
        // بدء التطبيق عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', initializeApp);
        
        
        
        
        
    </script>
    
    
    
    
